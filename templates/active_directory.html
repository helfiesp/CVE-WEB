{% extends "base.html" %}
{% block title %}Active directory {% endblock %}
{% block content %}

<div class="CVE_table">
<h2>Active directory</h2>
<p>This section contains various information fetched from the Active directory environment.</p>
<a href="{% url 'fetch_from_ldap' %}" class="btn btn-primary">Fetch from LDAP</a>
    <h1>AD Users</h1>
    <form method="get" action="">
        <label for="field-selection">Field Selection:</label>
        <input type="checkbox" name="field" value="user" id="field-selection">
        <label for="user">User</label>
        <!-- Add checkboxes for other fields in a similar manner -->
        <input type="submit" value="Apply">
    </form>
    <form method="get" action="">
        <label for="search">Search:</label>
        <input type="text" name="q" id="search">
        <input type="submit" value="Search">
    </form>
    <table>
        <tr>
            <th>User</th>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Display Name</th>
            <th>Title</th>
            <th>Description</th>
            <th>Phone</th>
            <th>Account Creation</th>
            <th>Account Type</th>
            <th>Email</th>
            <th>Password Last Changed</th>
            <th>Password Expiration</th>
            <th>Groups</th>
        </tr>
        {% for aduser in adusers %}
            <tr>
                {% if 'user' in fields %}
                    <td>{{ aduser.user }}</td>
                {% endif %}
                <!-- Add table data for other fields in a similar manner, based on field selection -->
            </tr>
        {% empty %}
            <tr>
                <td colspan="13">No AD Users found.</td>
            </tr>
        {% endfor %}
    </table>


</div>
</div>
{% endblock %}
